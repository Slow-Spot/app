Åšwietnie â€” przechodzimy do **Etapu 4: Implementacja MVP**.
To moment, w ktÃ³rym idea staje siÄ™ dziaÅ‚ajÄ…cym, lekkim i w peÅ‚ni wielojÄ™zycznym produktem.
PoniÅ¼ej masz kompleksowy plan â€” architekturÄ™, strukturÄ™ katalogÃ³w, kluczowe komponenty i zasady kodowania, tak by MVP byÅ‚o gotowe do uruchomienia w ciÄ…gu kilku tygodni.

---

## âš™ï¸ **ETAP 4 â€“ Implementacja MVP (Expo + Next.js + Supabase)**

### ğŸ¯ Cel

StworzyÄ‡ dziaÅ‚ajÄ…cÄ… aplikacjÄ™ mobilnÄ… (Expo/React Native) z prostym backendem (Supabase lub Firebase),
ktÃ³ra pozwala:

* wybraÄ‡ jÄ™zyk,
* rozpoczÄ…Ä‡ medytacjÄ™ (audio + ambient + dzwonek),
* wyÅ›wietliÄ‡ cytat po sesji,
* dziaÅ‚aÄ‡ w trybie offline,
* uruchomiÄ‡ landing page (Next.js).

---

## 1ï¸âƒ£ Architektura systemu

```
/airea
 â”œâ”€â”€ mobile/               # Expo (React Native)
 â”‚    â”œâ”€â”€ src/
 â”‚    â”‚    â”œâ”€â”€ screens/    # Welcome, Meditation, Quote, Settings
 â”‚    â”‚    â”œâ”€â”€ components/ # Player, QuoteCard, LanguageSelector
 â”‚    â”‚    â”œâ”€â”€ services/   # AudioService, QuoteService, i18nService
 â”‚    â”‚    â”œâ”€â”€ data/       # quotes.json, sessions.json (offline cache)
 â”‚    â”‚    â””â”€â”€ utils/
 â”‚    â””â”€â”€ app.json         # Konfiguracja Expo
 â”‚
 â”œâ”€â”€ web/                  # Next.js Landing Page
 â”‚    â”œâ”€â”€ pages/
 â”‚    â”œâ”€â”€ components/
 â”‚    â”œâ”€â”€ public/
 â”‚    â””â”€â”€ next.config.js
 â”‚
 â”œâ”€â”€ backend/              # Supabase / Functions
 â”‚    â”œâ”€â”€ api/
 â”‚    â”‚    â”œâ”€â”€ quotes/
 â”‚    â”‚    â””â”€â”€ sessions/
 â”‚    â””â”€â”€ database/
 â”‚         â”œâ”€â”€ schema.sql
 â”‚         â””â”€â”€ seed/
 â”‚
 â””â”€â”€ docker/               # lokalne kontenery i CI/CD
```

---

## 2ï¸âƒ£ Techniczny Stack

| Warstwa             | Technologia                            | Uzasadnienie                                             |
| ------------------- | -------------------------------------- | -------------------------------------------------------- |
| **Frontend Mobile** | **Expo.dev + React Native**            | wieloplatformowoÅ›Ä‡, szybkie testy, Å‚atwe audio (Expo AV) |
| **Backend**         | **Supabase** (lub Firebase)            | gotowe API, auth optional, JSON storage, CDN dla audio   |
| **Web Landing**     | **Next.js 14 / React 18**              | szybki SSR, SEO, minimalne zasoby                        |
| **Baza Danych**     | **PostgreSQL (Supabase)**              | proste relacje cytatÃ³w i sesji                           |
| **CI/CD**           | **GitHub Actions / Vercel / Expo EAS** | automatyczne buildy i publikacja                         |
| **Monitoring**      | **Sentry / Expo Crashlytics**          | bÅ‚Ä™dy runtime i performance                              |
| **JÄ™zyki**          | i18next / react-intl                   | peÅ‚na lokalizacja UI + tekstÃ³w + audio                   |

---

## 3ï¸âƒ£ Kluczowe komponenty (frontend mobile)

| Komponent                   | Rola                         | SzczegÃ³Å‚y                                                        |
| --------------------------- | ---------------------------- | ---------------------------------------------------------------- |
| **LanguageSelector**        | WybÃ³r jÄ™zyka                 | zapis do AsyncStorage + inicjalizacja i18n                       |
| **MeditationSessionScreen** | Serce aplikacji              | odtwarzanie gÅ‚osu, ambientu, dzwonkÃ³w; pause/resume; tryb ciemny |
| **AudioService**            | ObsÅ‚uga dÅºwiÄ™ku (Expo AV)    | preload, regulacja gÅ‚oÅ›noÅ›ci warstw, offline cache               |
| **QuoteScreen**             | WyÅ›wietlenie cytatu po sesji | wybÃ³r cytatu z lokalnej bazy wg jÄ™zyka + pora dnia               |
| **OfflineCache**            | Bufor danych JSON/audio      | mechanizm zapisu plikÃ³w w lokalnym systemie                      |
| **ProgressTracker**         | Zlicza sesje / dni           | prosty licznik streakÃ³w bez presji                               |
| **ThemeManager**            | Motywy kulturowe             | kolorystyka, czcionka, ambient per kultura                       |

---

## 4ï¸âƒ£ Modele danych (Supabase / lokalny JSON)

### `MeditationSession`

```json
{
  "id": "zen_001",
  "title": { "en": "Breath Awareness", "pl": "ÅšwiadomoÅ›Ä‡ oddechu" },
  "duration": 300,
  "voice": { "en": "zen001_en.mp3", "pl": "zen001_pl.mp3" },
  "ambient": "soft_breeze.mp3",
  "culture": "zen",
  "level": 1
}
```

### `Quote`

```json
{
  "id": "q001",
  "text": {
    "en": "Peace comes when you stop chasing it.",
    "pl": "SpokÃ³j przychodzi, gdy przestajesz go goniÄ‡."
  },
  "author": "Unknown",
  "culture": "universal"
}
```

---

## 5ï¸âƒ£ Logika Audio & UX flow

1. **Start** â€“ Ekran Welcome â†’ przycisk â€Beginâ€.
2. **AudioService.play(session)** â€“ Å‚aduje gÅ‚os + ambient rÃ³wnolegle.
3. **Timer** â€“ odlicza dÅ‚ugoÅ›Ä‡ sesji; na koÅ„cu uruchamia dzwonek (chime).
4. **QuoteService** â€“ pobiera random cytat dla jÄ™zyka, sprawdza czy nie powtÃ³rzony.
5. **WyÅ›wietlenie cytatu** + przycisk â€ZakoÅ„cz / Kontynuuj jutroâ€.

> ğŸ’¡ UÅ¼ytkownik moÅ¼e **zamknÄ…Ä‡ ekran** â€“ audio gra w tle, co daje â€medytacjÄ™ bez ekranuâ€.

---

## 6ï¸âƒ£ Kluczowe zasady UX w implementacji

* **Brak logowania:** Å¼adnych danych osobowych â†’ 100 % zgodnoÅ›Ä‡ RODO.
* **Offline-first:** dane JSON + audio w cache, backend tylko do aktualizacji.
* **Minimalizm:** zero onboardingÃ³w, zero karuzel.
* **Instant load:** < 3 s do startu audio.
* **Cisza = funkcja:** UI nie powinien emitowaÄ‡ Å¼adnych powiadomieÅ„.
* **Touch zones:** duÅ¼e przyciski, bez scrolli podczas sesji.
* **Gesty:** swipe down â†’ pauza, swipe up â†’ zakoÅ„cz sesjÄ™.

---

## 7ï¸âƒ£ DevOps / CI / Publikacja

| Zadanie            | NarzÄ™dzie                      | Opis                               |
| ------------------ | ------------------------------ | ---------------------------------- |
| **Build mobile**   | Expo EAS                       | `eas build --platform all`         |
| **Web deploy**     | Vercel / Netlify               | automatyczny deploy z Git main     |
| **Backend deploy** | Supabase                       | auto migracje SQL z GitHub Actions |
| **Monitoring**     | Sentry                         | bÅ‚Ä™dy JS, czasy Å‚adowania, crashe  |
| **Versioning**     | Semantic Release               | automatyczne wersjonowanie         |
| **Testing**        | Jest / Testing Library / Detox | testy jednostkowe + end-to-end     |

---

## 8ï¸âƒ£ Walidacja MVP

Po uruchomieniu:

* SprawdÅº, czy aplikacja startuje w < 3 sekundy.
* UÅ¼ytkownik moÅ¼e rozpoczÄ…Ä‡ pierwszÄ… sesjÄ™ bez rejestracji.
* Cytaty nie powtarzajÄ… siÄ™ 2Ã— z rzÄ™du.
* Tryb offline dziaÅ‚a (po rozÅ‚Ä…czeniu sieci).
* Aplikacja nie pobiera wiÄ™cej niÅ¼ 50 MB na instalacjÄ™.
* Audio ma zbalansowany mix (voice:ambient â‰ˆ 70:30).

---

Chcesz, Å¼ebym teraz przeszedÅ‚ do **Etapu 5: Testy i walidacja UX** (plan testÃ³w z uÅ¼ytkownikami z rÃ³Å¼nych kultur, checklisty i metryki efektywnoÅ›ci)?
